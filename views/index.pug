extends layout

block content
  #app
    .container-fluid.p-0
      .row.no-gutters
        #leftside.col-4
        #rightside.col-8
        #container.content-container
          header.mb-4
            .d-flex.justify-content-between.align-items-center
              span {{ title }}
              nav-menu(':items'="navItems")
          main
            .row
              #photos.col-md-3
                food-image(':image'="featuredImage" '@click'="handleImageClick")
              .col-md-9
                h2.mb-4 {{ commentTitle }}
                section#blogposts
                  blog-post(
                    'v-for'="post in posts"
                    ':key'="post.id"
                    ':author'="post.author"
                    ':date'="post.date"
                    ':content'="post.content"
                    '@show-author-info'="showAuthorInfo"
                  )
          footer.text-center.mt-4
            | © Copyright FOOD BLOG
    author-modal('v-if'="showModal" ':author-data'="selectedAuthor" '@close'="closeModal")

  //- 组件模板放在 #app 外面，内容每行前加|，防止Jade解析
  script(type="text/x-template" id="blog-post-template")
    | <div class="card mb-4">
    |   <div class="card-body">
    |     <div class="d-flex align-items-center mb-3">
    |       <img :src="profileImage" alt="Author profile" class="profile-img mr-3" @click="onProfileClick">
    |       <div>
    |         <span class="text-muted">{{ author }} — {{ date }}</span>
    |         <button class="btn btn-sm btn-link text-success font-weight-bold p-0 ml-2">REPLY</button>
    |       </div>
    |     </div>
    |     <p class="card-text">{{ content }}</p>
    |   </div>
    | </div>
  script(type="text/x-template" id="author-modal-template")
    | <div class="modal-wrapper">
    |   <div class="modal d-block" tabindex="-1" role="dialog">
    |     <div class="modal-dialog modal-dialog-centered" role="document">
    |       <div class="modal-content bg-dark text-white">
    |         <div class="modal-header border-0">
    |           <h5 class="modal-title">{{ authorData.name }}</h5>
    |           <button type="button" class="close text-white" @click="$emit('close')">
    |             <span aria-hidden="true">&times;</span>
    |           </button>
    |         </div>
    |         <div class="modal-body">
    |           <div class="mb-2"><strong>Foodie Level: {{ authorData.foodieLevel }}</strong></div>
    |           <p><strong>Bio:</strong><br>{{ authorData.bio }}</p>
    |         </div>
    |         <div class="modal-footer border-0">
    |           <button type="button" class="btn btn-outline-light" @click="$emit('close')">Close</button>
    |         </div>
    |       </div>
    |     </div>
    |   </div>
    |   <div class="modal-backdrop show" @click="$emit('close')"></div>
    | </div>
  script(type="text/x-template" id="food-image-template")
    | <div class="food-image-container">
    |   <img 
    |     :src="image.src" 
    |     :alt="image.alt" 
    |     class="img-fluid mb-3 food-image"
    |     @click="$emit('click', image)" 
    |   />
    |   <div class="image-caption text-center text-muted small" v-if="image.caption">
    |     {{ image.caption }}
    |   </div>
    | </div>
  script(type="text/x-template" id="nav-menu-template")
    | <nav class="navbar navbar-expand navbar-light">
    |   <button class="navbar-toggler d-md-none mb-2" type="button" data-toggle="collapse" data-target="#navbarContent">
    |     <span class="navbar-toggler-icon"></span>
    |   </button>
    |   <div class="collapse navbar-collapse" id="navbarContent">
    |     <ul class="navbar-nav">
    |       <li v-for="(item, index) in items" :key="index" class="nav-item">
    |         <a class="nav-link" :href="item.url">{{ item.text }}</a>
    |       </li>
    |     </ul>
    |   </div>
    | </nav>
